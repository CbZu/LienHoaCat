<!DOCTYPE HTML>
<html>

<% include partials/index_Header.ejs %>

<body>
<div class="container">
    <div class="row" data-gutter="60">
        <h3><a href="/">Home</a></h3>
    </div>


    <br/>
    <div class="row">
        <button class="btn btn-danger" id='InsertBtn' onclick="insert()">Add Category</button>
    </div>
    <div class="row" id='rowInsert' style="display: none">
        <div class="row">
            <h4 class="col-md-4">

                Thư mục </h4>

            <h4 class="col-md-4">

                Nhóm Sản Phẩm </h4>

            <h4 class="col-md-4">

                Avarta </h4>
        </div>
        <div class="row">
            <div class="col-md-4">
                <select class="form-control" id="newFolder">
                    <% for(i = 0 ; i < tree.length ; i++) { %>
                    <option value="<%= tree[i].folder_id %>"><%= tree[i].folder_name %></option>
                    <% } %>

                </select></div>
            <div class="col-md-4"><input class="form-control" id="newCat" value=""></div>


            <div class="col-md-4"><input class="form-control" id="newImg" value=""></div>


        </div>
        <br>
        <button class="btn btn-danger" id="InsertBtn" onclick="insert()" style="display: none;">Add Category</button>
    </div>
    <div class="row">
        <button class="btn btn-danger" id='Ok' onclick="OK()" style="display: none">Ok</button>
    </div>
    <div class="row">

                <div class="row">
                    <div class="col-md-4">
                        <h4>Thư Mục</h4>
                    </div>
                    <div class="col-md-4">
                        <h4>Nhóm Sản Phẩm</h4>
                    </div>


                </div>
                <% for(i = 0;i < result.length;i++){ %>

                    <div class="row">
                        <div class="col-md-4">
                            <input class="form-control" id='folder<%= result.folder_id %>'
                                   value='<%= result[i].folder_name %>'></input>
                        </div>
                        <div class="col-md-4">
                            <input class="form-control" id='cat<%= result.cat_id %>'
                                   value='<%= result[i].cat_name %>'></input>
                        </div>
                        <div class="col-md-1">
                            <button class="form-control">OK</button>
                        </div>
                        <div class="col-md-2">
                            <a class="btn btn-success form-control"
                               href="/maintenance-prd?catflt=<%= result[i].cat_name %>&catId=<%= result[i].cat_id %>">Products</a>
                        </div>
                    </div>



                <% } %>

    </div>
    <div class="gap"></div>
</div>


<script type="text/javascript" src="assets/js/jquery-2.2.3.min.js"></script>
<script type="text/javascript" src="assets/js/animated-headline.js"></script>
<script type="text/javascript" src="assets/js/menu.js"></script>
<script type="text/javascript" src="assets/js/modernizr.js"></script>
<script type="text/javascript" src="assets/js/isotope.pkgd.min.js"></script>
<script type="text/javascript" src="assets/js/jquery.flexslider-min.js"></script>
<script type="text/javascript" src="assets/js/jquery.animsition.min.js"></script>
<script type="text/javascript" src="assets/js/init.js"></script>
<script type="text/javascript" src="assets/js/main.js"></script>
<script type="text/javascript" src="assets/js/smooth-scroll.js"></script>
<script type="text/javascript" src="assets/js/numscroller.js"></script>
<script type="text/javascript" src="assets/js/wow.min.js"></script>
<script type="text/javascript" src="assets/js/owl.carousel.min.js"></script>
<script>
    function insert() {

        document.getElementById('rowInsert').style.display = 'block';
        document.getElementById('InsertBtn').style.display = 'none';
        document.getElementById('Ok').style.display = 'block';
    }

    function OK() {
        var allElements = document.getElementsByTagName("input");
        var cats = new Array();
        var images = new Array();
        var folders = new Array();
        for (var i = 0; i < allElements.length; i++) {
            if (allElements[i].id == 'newCat') {
                cats.push(allElements[i].value);
            }
            if (allElements[i].id == 'newImg') {
                images.push(allElements[i].value);
            }
        }
        var allElements = document.getElementsByTagName("select");
        for (var i = 0; i < allElements.length; i++) {
            if (allElements[i].id == 'newFolder') {
                folders.push(allElements[i].value);
                break;
            }
        }
        $.ajax({
            type: "POST",
            url: "./PetMart/add-category",
            data: "mode=update&description=" + cats + "&image=" + images + "&folder=" + folders,
            success: function (msg) {
                //alert(msg);
                data = msg;

                location.reload();

            }
        });
    }
</script>
</div>
</body>

<% include partials/index_Footer.ejs %>
</html>


